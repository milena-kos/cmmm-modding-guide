"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[635],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8941:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:4,title:"Adding saving formats",description:"H7;100;100;First H7 level!;;"},i="Adding your own export formats",l={unversionedId:"tutorial-basics/exportformats",id:"tutorial-basics/exportformats",title:"Adding saving formats",description:"H7;100;100;First H7 level!;;",source:"@site/docs/tutorial-basics/exportformats.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/exportformats",permalink:"/docs/tutorial-basics/exportformats",draft:!1,editUrl:"https://github.com/milena-kos/cmmm-modding-guide/blob/main/docs/tutorial-basics/exportformats.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Adding saving formats",description:"H7;100;100;First H7 level!;;"},sidebar:"tutorialSidebar",previous:{title:"Adding a built-in level",permalink:"/docs/tutorial-basics/levels"},next:{title:"Adding a setting",permalink:"/docs/tutorial-basics/settings"}},s={},p=[{value:"Falling back to V3 if no modded cells",id:"falling-back-to-v3-if-no-modded-cells",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"adding-your-own-export-formats"},"Adding your own export formats"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Saving (export) formats are the way game saves levels to a string for easy sharing. Default saving formats are V1, V2, V3. Popular custom formats are MP1, MP0, VX, J1, P6 and others.")),(0,o.kt)("p",null,"First, open your mod in Unity. If you don't have a project, please visit ",(0,o.kt)("a",{parentName:"p",href:"../intro"},"Introduction"),"."),(0,o.kt)("p",null,"In the file explorer at the bottom, open ",(0,o.kt)("inlineCode",{parentName:"p"},"Scripts")," folder. Here, open ",(0,o.kt)("inlineCode",{parentName:"p"},"Level Data"),"."),(0,o.kt)("p",null,"Here there are 2 files you would want to look out for:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"LoadString.cs")," for loading level codes, and"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Save.cs")," for saving them.")),(0,o.kt)("p",null,"Both of them are switch statements."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"LoadString.cs")," is based on the part before first semicolon: ",(0,o.kt)("inlineCode",{parentName:"p"},"V1"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"V3"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"V3"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Save.cs")," is based on an integer from player preference of their saving code: ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," (V1), ",(0,o.kt)("inlineCode",{parentName:"p"},"1")," (V2), or ",(0,o.kt)("inlineCode",{parentName:"p"},"2")," (V3)."),(0,o.kt)("p",null,"That about all you need to know. You can look at how existing export formats are implemented in order to be more familiar with this. Unfortunately you will need to know quite a lot of coding to add your own, but I believe in you."),(0,o.kt)("h2",{id:"falling-back-to-v3-if-no-modded-cells"},"Falling back to V3 if no modded cells"),(0,o.kt)("p",null,"This is a feature I recommened every mod with custom saving format have. It will make folks in #vaults channel of Cell Machine Discord a lot less angry."),(0,o.kt)("p",null,"A good way to do this would be to replace"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'int format = PlayerPrefs.GetInt("ExportFormat", 2) + 1;\n')),(0,o.kt)("p",null,"and"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'switch (PlayerPrefs.GetInt("ExportFormat", 2))\n')),(0,o.kt)("p",null,"to"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'int format = 3; // 3 is the representation of V3\nforeach (Cell cell in CellFunctions.cellList)\n{\n    if ((int)cell.cellType > 8) { // if any modded cell is found, ...\n        ExportFormat = PlayerPrefs.GetInt("ExportFormat"); // use your custom saving format, ...\n        break; // and stop checking!\n    }\n}\n')),(0,o.kt)("p",null,"and"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"switch (format - 1)\n")),(0,o.kt)("p",null,"You are probably wondering on how to add the saving code preference to the Settings menu. Next article? How did you guess."))}u.isMDXComponent=!0}}]);